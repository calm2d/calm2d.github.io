<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="theme-color" content="#0C3784">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <link rel="icon" type="image/png" href="favicon.png"/>
    <title>CALM - Canvas And Lisp Magic</title>
    <link rel="stylesheet" type="text/css" href="w3c-oldstyle-modified.css">

    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.5.1/styles/xcode.min.css">
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.5.1/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.5.1/languages/lisp.min.js"></script>
    <style>
     .head-img {
         height:32rem;
         margin-top:1rem;
     }
     .inline-block {
         display: inline-block;
     }
     nav > ul {
         width: 32rem;
         border-bottom-width: 1px;
         border-style: dashed;
         padding: 10px 0;
     }
     nav > ul > li {
         list-style-type: none;
         display: inline;
     }
     .releases {
         margin: 3rem 0;
     }
     .releases a{
         padding: 1rem;
         border-width: 1px;
         border-style: groove;
         margin-right: 1rem;
     }
     footer {
         border-width: 1px 0 0 0;
         border-style: dashed;
         margin: 4rem 0 0 0;
     }
     @media screen and (max-width: 1280px) {
         .hide-on-small-screen {
             display: none;
         }
         .head-img {
             width: 100%;
             height: auto;
         }
         nav > ul {
             width: 90%;
         }
     }
    </style>
  </head>
  <body>
    <nav>
      <ul>
        <li><a href="/">Home</a></li>
        <li><a title="OPEN SOON">Recipes</a></li>
        <li><a title="OPEN SOON">Gallery</a></li>
        <li><a href="https://github.com/calm2d">Github</a></li>
      </ul>
    </nav>
    <a class="hide-on-small-screen" href="/" title="CALM">
      <img alt="CALM Logo - the meditator" style="height:5rem;float:right;" src="calm.png"/>
    </a>
    <h1>CALM - Canvas And Lisp Magic</h1>
    <div>
      <div class="inline-block">
        <a title="Random Piet Mondrian" href="https://github.com/calm2d/calm/tree/main/src/gallery/mondrian">
          <img alt="Random Piet Mondrian" class="head-img" src="mondrian.png" />
        </a>
      </div>
      <div class="inline-block">
        <pre class="hide-on-small-screen"><code style="width: 33rem; height: 32rem;" class="language-lisp">
(in-package #:calm)

;; white, red, yellow, blue
(defparameter *mondrian-color-list* '((0.93 0.92 0.94) (0.89 0.12 0.17) (0.94 0.87 0.47) (0 0.35 0.59)))

(defun draw-rect (x y w h &optional color)
  (c:set-source-rgb 0 0 0)
  (c:rectangle x y w h)
  (c:stroke-preserve)
  (apply #'c:set-source-rgb (nth (if color (1+ (random 3)) 0) *mondrian-color-list*))
  (c:fill-path))

(defun draw ()
  (c:set-line-width 20)
  (loop with x = 0
        for width = (+ 42 (random 300))
        until (> x *calm-width*)
        do (loop with y = 0
                 for height = (+ 42 (random 300))
                 until (> y *calm-height*)
                 do (draw-rect x y width height (= (random 3) 0))
                 do (incf y height))
        do (incf x width)))
        </code></pre>
      </div>
    </div>

    <section>
      <h2>A Lisp image pre-bundled with <a href="https://libsdl.org/">SDL</a> and <a href="https://cairographics.org/">Cairo</a>.</h2>
      <p>With CALM, you have:
        <ul>
          <li>a cross-platform access to audio, keyboard, mouse, joystick, and graphics hardware</li>
          <li>a 2D graphics library for you to draw anything to your screen</li>
          <li>a Lisp code running environment</li>
        </ul>
        you can:
        <ul>
          <li>build a game</li>
          <li>generate a 2D canvas art</li>
          <li>make a cross-platform application</li>
          <li>write once, run anywhere (LOL)</li>
          <li>...</li>
        </ul>
        and <b>prevent</b> non-wizard users to:
        <ul>
          <li>install dependencies via the scary black terminals</li>
          <li>install Lisp implemetations</li>
          <li>say that "Lisp has no hope"</li>
        </ul>
      </p>
    </section>

    <section>
      <h2>Latest Releases (v0.0.13 / 20 Jun 2022)</h2>
      <p class="releases">
        <a href="https://github.com/calm2d/calm/releases/download/v0.0.13/calm-lnx.7z">Linux</a>
        <a href="https://github.com/calm2d/calm/releases/download/v0.0.13/calm-mac.7z">macOS</a>
        <a href="https://github.com/calm2d/calm/releases/download/v0.0.13/calm-win.7z">Windows</a>
      </p>
    </section>

    <section>
      <h2>Quick Start</h2>

      <p>Extract what you have downloaded,
        add the folder <code>calm</code> into your <code>PATH</code> variable.</p>


      <pre><code class="language-bash">
export PATH="~/Downloads/calm/:$PATH"
cd ~/Downloads/calm/gallery/mondrian/
calm
      </code></pre>
    </section>

    <section>
      <h2>First Drawing</h2>

      Create a folder <code>my-first-drawing</code>, inside the folder, create a file <code>canvas.lisp</code> with the following code:

      <pre><code class="language-lisp">
(in-package #:calm)

(swank:create-server :port 4242)

(defun draw ()
  (c:move-to 120 200)
  (c:set-font-size 42)
  (c:set-source-rgb 0.047 0.21 0.51)
  (c:select-font-face "cursive" :normal :bold)
  (c:show-text "Oh, impermanent."))
      </code></pre>

      Inside your shell, change to the folder, and execute <code>calm</code>:

      <pre><code class="language-bash">
cd my-first-drawing
calm
      </code></pre>

      You should have what you expected.
    </section>

    <section>
      <h2>Further More</h2>

      <p>
        Where did all these magic spells like <code>(c:set-...)</code> come from?
        <br>
        <br>
        Please refer to

        <a href="https://www.cliki.net/cl-cairo2">cl-cairo2</a>

        and

        <a href="https://cairographics.org/">Cairo</a> before the documentation were published.
      </p>
    </section>

    <footer>
      <p>
        The content of this site is licensed under the <a href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International</a>.
      </p>

      <p>CALM is <a href="https://www.fsf.org/licensing/essays/free-sw.html">free software</a> and is available to be redistributed and/or modified under the terms of the <a href="http://mozilla.org/MPL/2.0/">Mozilla Public License (MPL)</a>. </p>

      <p style="float:right;">Last edited: 04 Jul 2022</p>
    </footer>

    <script>hljs.highlightAll();</script>
  </body>

</html>
